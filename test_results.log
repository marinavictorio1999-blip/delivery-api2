[INFO] Scanning for projects...
[INFO] 
[INFO] -------------------< com.deliverytech:delivery-api >--------------------
[INFO] Building delivery-api 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco:0.8.13:prepare-agent (default) @ delivery-api ---
[INFO] argLine set to -javaagent:C:\\Users\\marin\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.13\\org.jacoco.agent-0.8.13-runtime.jar=destfile=C:\\Users\\marin\\Downloads\\delivery-tech-main\\delivery-tech-main\\delivery-api\\target\\jacoco.exec
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ delivery-api ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO] Copying 0 resource from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.14.0:compile (default-compile) @ delivery-api ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ delivery-api ---
[INFO] skip non existing resourceDirectory C:\Users\marin\Downloads\delivery-tech-main\delivery-tech-main\delivery-api\src\test\resources
[INFO] 
[INFO] --- compiler:3.14.0:testCompile (default-testCompile) @ delivery-api ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- surefire:3.5.3:test (default-test) @ delivery-api ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.deliverytech.delivery_api.DeliveryApiApplicationTests
22:20:10.342 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.deliverytech.delivery_api.DeliveryApiApplicationTests]: DeliveryApiApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
22:20:10.536 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.deliverytech.delivery_api.DeliveryApiApplication for test class com.deliverytech.delivery_api.DeliveryApiApplicationTests
22:20:10.825 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.3)

2025-09-03T22:20:11.245-03:00  INFO 28408 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : Starting DeliveryApiApplicationTests using Java 21.0.8 with PID 28408 (started by marin in C:\Users\marin\Downloads\delivery-tech-main\delivery-tech-main\delivery-api)
2025-09-03T22:20:11.245-03:00 DEBUG 28408 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-03T22:20:11.245-03:00  INFO 28408 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-09-03T22:20:11.290-03:00 DEBUG 28408 --- [delivery-api] [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@7d30007d
2025-09-03T22:20:12.828-03:00  INFO 28408 --- [delivery-api] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-03T22:20:12.947-03:00  INFO 28408 --- [delivery-api] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97 ms. Found 6 JPA repository interfaces.
2025-09-03T22:20:13.660-03:00  INFO 28408 --- [delivery-api] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-03T22:20:13.769-03:00  INFO 28408 --- [delivery-api] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.18.Final
2025-09-03T22:20:13.829-03:00  INFO 28408 --- [delivery-api] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-03T22:20:14.263-03:00  INFO 28408 --- [delivery-api] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-03T22:20:14.318-03:00  INFO 28408 --- [delivery-api] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-03T22:20:14.703-03:00  INFO 28408 --- [delivery-api] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:delivery user=SA
2025-09-03T22:20:14.705-03:00  INFO 28408 --- [delivery-api] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-03T22:20:14.743-03:00  WARN 28408 --- [delivery-api] [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-03T22:20:14.768-03:00  INFO 28408 --- [delivery-api] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-03T22:20:16.168-03:00  INFO 28408 --- [delivery-api] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists cliente cascade 
Hibernate: 
    drop table if exists item_pedido cascade 
Hibernate: 
    drop table if exists pedido cascade 
Hibernate: 
    drop table if exists produto cascade 
Hibernate: 
    drop table if exists restaurante cascade 
Hibernate: 
    drop table if exists usuario cascade 
Hibernate: 
    create table cliente (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        email varchar(255) unique,
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table item_pedido (
        preco_unitario numeric(38,2),
        quantidade integer,
        subtotal numeric(38,2),
        id bigint generated by default as identity,
        pedido_id bigint,
        produto_id bigint,
        observacao varchar(255),
        primary key (id)
    )
Hibernate: 
    create table pedido (
        total numeric(38,2),
        cliente_id bigint,
        data_entrega timestamp(6),
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        endereco_entrega varchar(255),
        observacao varchar(255),
        status enum ('CANCELADO','CONFIRMADO','EM_ENTREGA','EM_PREPARO','ENTREGUE','PRONTO','REALIZADO'),
        primary key (id)
    )
Hibernate: 
    create table produto (
        ativo boolean,
        disponivel boolean not null,
        preco numeric(38,2) not null,
        data_cadastro timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint not null,
        descricao varchar(1000),
        categoria varchar(255),
        imagem_url varchar(255),
        nome varchar(255),
        primary key (id)
    )
Hibernate: 
    create table restaurante (
        ativo boolean,
        taxa_entrega numeric(38,2),
        data_cadastro timestamp(6),
        id bigint generated by default as identity,
        descricao varchar(1000),
        categoria varchar(255),
        cnpj varchar(255) unique,
        endereco varchar(255),
        especialidade varchar(255),
        horario_funcionamento varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
Hibernate: 
    create table usuario (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(255) not null unique,
        nome varchar(255),
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE','USER') not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists item_pedido 
       add constraint FK60ym08cfoysa17wrn1swyiuda 
       foreign key (pedido_id) 
       references pedido
Hibernate: 
    alter table if exists item_pedido 
       add constraint FKtk55mn6d6bvl5h0no5uagi3sf 
       foreign key (produto_id) 
       references produto
Hibernate: 
    alter table if exists pedido 
       add constraint FK30s8j2ktpay6of18lbyqn3632 
       foreign key (cliente_id) 
       references cliente
Hibernate: 
    alter table if exists pedido 
       add constraint FK3eud5cqmgsnltyk704hu3qj71 
       foreign key (restaurante_id) 
       references restaurante
Hibernate: 
    alter table if exists produto 
       add constraint FKb9jhjyghjcn25guim7q4pt8qx 
       foreign key (restaurante_id) 
       references restaurante
2025-09-03T22:20:16.247-03:00  INFO 28408 --- [delivery-api] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-03T22:20:16.511-03:00  INFO 28408 --- [delivery-api] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-03T22:20:17.729-03:00  INFO 28408 --- [delivery-api] [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name authServiceImpl
2025-09-03T22:20:18.333-03:00 DEBUG 28408 --- [delivery-api] [           main] i.m.c.u.i.logging.InternalLoggerFactory  : Using SLF4J as the default logging framework
2025-09-03T22:20:18.753-03:00 DEBUG 28408 --- [delivery-api] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 58 mappings in 'requestMappingHandlerMapping'
2025-09-03T22:20:18.945-03:00 DEBUG 28408 --- [delivery-api] [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-03T22:20:19.094-03:00  INFO 28408 --- [delivery-api] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2025-09-03T22:20:19.263-03:00 DEBUG 28408 --- [delivery-api] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-03T22:20:19.437-03:00 DEBUG 28408 --- [delivery-api] [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-03T22:20:19.506-03:00 DEBUG 28408 --- [delivery-api] [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-03T22:20:19.792-03:00  INFO 28408 --- [delivery-api] [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:delivery'
2025-09-03T22:20:19.894-03:00  INFO 28408 --- [delivery-api] [           main] c.d.d.DeliveryApiApplicationTests        : Started DeliveryApiApplicationTests in 9.087 seconds (process running for 10.73)
=== INICIANDO CARGA DE DADOS DE TESTE ===
--- Inserindo clientes ---
Hibernate: 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_criacao,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? Cliente João Silva inserido
Hibernate: 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_criacao,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? Cliente Maria Santos inserido
Hibernate: 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_criacao,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? Cliente Pedro Oliveira inserido
Hibernate: 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_criacao,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? Cliente Ana Costa inserido
Hibernate: 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_criacao,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        cliente c1_0 
    where
        c1_0.email=?
Hibernate: 
    insert 
    into
        cliente
        (ativo, data_criacao, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
? Cliente Carlos Ferreira inserido
--- Inserindo Restaurantes ---
Hibernate: 
    select
        r1_0.id,
        r1_0.taxa_entrega,
        r1_0.ativo,
        r1_0.categoria,
        r1_0.cnpj,
        r1_0.data_cadastro,
        r1_0.descricao,
        r1_0.endereco,
        r1_0.especialidade,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.telefone 
    from
        restaurante r1_0 
    where
        r1_0.nome=?
Hibernate: 
    insert 
    into
        restaurante
        (taxa_entrega, ativo, categoria, cnpj, data_cadastro, descricao, endereco, especialidade, horario_funcionamento, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
? Restaurante Pizza Express inserido
Hibernate: 
    select
        r1_0.id,
        r1_0.taxa_entrega,
        r1_0.ativo,
        r1_0.categoria,
        r1_0.cnpj,
        r1_0.data_cadastro,
        r1_0.descricao,
        r1_0.endereco,
        r1_0.especialidade,
        r1_0.horario_funcionamento,
        r1_0.nome,
        r1_0.telefone 
    from
        restaurante r1_0 
    where
        r1_0.nome=?
Hibernate: 
    insert 
    into
        restaurante
        (taxa_entrega, ativo, categoria, cnpj, data_cadastro, descricao, endereco, especialidade, horario_funcionamento, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
? Restaurante Burger King inserido
=== CARGA DE DADOS CONCLUÍDA ===

? Spring Boot Application iniciada com sucesso!

? SISTEMA DE CAPTURA AUTOMÁTICA ATIVO!
? Respostas serão salvas em: ./entregaveis/
? Faça requisições para /api/* e veja os arquivos sendo gerados!

Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build as described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org.mockito/org/mockito/Mockito.html#0.3
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (C:\Users\marin\.m2\repository\net\bytebuddy\byte-buddy-agent\1.17.6\byte-buddy-agent-1.17.6.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.44 s -- in com.deliverytech.delivery_api.DeliveryApiApplicationTests
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- jacoco:0.8.13:report (report) @ delivery-api ---
[INFO] Loading execution data file C:\Users\marin\Downloads\delivery-tech-main\delivery-tech-main\delivery-api\target\jacoco.exec
[INFO] Analyzed bundle 'delivery-api' with 75 classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  13.982 s
[INFO] Finished at: 2025-09-03T22:20:21-03:00
[INFO] ------------------------------------------------------------------------
